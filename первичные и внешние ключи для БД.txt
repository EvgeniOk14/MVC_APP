условие:
        для таблиц person2 и messages, где id  - это первичный ключ в таблице erson2, а person_id  - это внешний ключ         таблицы messages, связанный с полем id таблицы person2

1) узнать имя ограничения внешнего ключа можно с помощью следующего запроса:

SELECT constraint_name
FROM information_schema.constraint_column_usage
WHERE table_name = 'messages' AND column_name = 'person_id';

2) запрос на удаление ограничения внешнего ключа:

ALTER TABLE messages DROP CONSTRAINT имя_вашего_ограничения_ключа;

3) создание внешнего ключа для таблицы messages, который связан с таблицей person2 и полем id:

ALTER TABLE messages 
ADD CONSTRAINT fk_messages_person2 
FOREIGN KEY (person_id) 
REFERENCES person2(id); 



В PostgreSQL вы можете использовать следующий запрос для поиска внешних ключей, связанных с определенной таблицей (замените 'person' на фактическое имя вашей таблицы):




SELECT
    conname AS constraint_name,
    conrelid::regclass AS table_name,
    a.attname AS column_name,
    confrelid::regclass AS referenced_table_name,
    af.attname AS referenced_column_name
FROM
    pg_constraint
JOIN
    pg_attribute a ON a.attnum = ANY(conkey) AND a.attrelid = conrelid
JOIN
    pg_attribute af ON af.attnum = ANY(confkey) AND af.attrelid = confrelid
WHERE
    confrelid = 'person'::regclass;  -- замените 'person' на имя вашей таблицы







ALTER TABLE messages
DROP CONSTRAINT IF EXISTS fk_messages_person2;





ALTER TABLE messages
ADD CONSTRAINT fk_messages_person2 FOREIGN KEY (person2_id) REFERENCES person2(id);
